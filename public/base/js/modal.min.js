(function(a){function g(e,f){a(f.modalWindow).hide().removeClass(f.posClass).css({top:"",left:""});a("."+f.overlayJsClass).remove();e.key=!1}modal=function(){this._init=function(e,f){var h={key:!1,center:!0,modalLink:a(e),modalWindowClass:"popupper",shadowBlock:"popup-overlay",pos:50,modalData:"popup",posClass:"-pos",closeClass:"-close-js"},b=a.extend(h,f),c={modalWindow:"."+b.modalWindowClass+"-js",close:"."+b.modalWindowClass+b.closeClass,posClass:b.modalWindowClass+b.posClass,overlayJsClass:b.shadowBlock+
"-js"},k=a('<div class="'+b.shadowBlock+" "+c.overlayJsClass+'"></div>');b.modalLink.click(function(){var d=a(this),e=a(window).scrollTop()+b.pos,d=d.data(b.modalData),d=a("."+b.modalWindowClass+"-"+d);a(c.modalWindow).hide().removeClass(c.posClass).css({top:"",left:""});a("."+c.overlayJsClass).remove();a("body").prepend(k);d.show();!0==b.center?d.css({top:a(window).height()/2-d.height()/2,left:a(window).width()/2-d.width()/2}):d.addClass(c.posClass).css({top:e,left:""})});a(c.modalWindow).on("click",
c.close,function(){g(b,c)});a(window).keydown(function(a){27==a.which&&g(b,c)});a(document).click(function(d){var e=0==a("."+c.overlayJsClass).length;b.key&&!a(d.target).closest(c.modalWindow).length?g(b,c):(a(d.target).hasClass(b.modalWindowClass+b.closeClass)||(b.key=!0),e&&(b.key=!1))});a(window).bind("resize",function(){var b=a(c.modalWindow+":visible");b.hasClass(c.posClass)||b.css({top:a(window).height()/2-b.height()/2,left:a(window).width()/2-b.width()/2})})}};a.fn.modal=function(e){return this.each(function(){a(this).data("modal",
(new modal)._init(this,e))})}})(jQuery);
